{"version":3,"file":"blocks/authentication-modal/frontend.js","mappings":"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","sources":["webpack://foodblog16-plus/./src/blocks/authentication-modal/frontend.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\r\n  // handle modal opening and closing\r\n  // get authentication modal\r\n  const modalEl = document.querySelector(\r\n    \".wp-block-foodblog16-plus-authentication-modal\"\r\n  );\r\n  // get elements to open the modal\r\n  const openModalBtn = document.querySelectorAll(\".open-modal\");\r\n\r\n  // add event listeners to elements for opening the modal\r\n  openModalBtn.forEach((el) => {\r\n    el.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n\r\n      // add class to show modal\r\n      modalEl.classList.add(\"modal-show\");\r\n    });\r\n  });\r\n\r\n  // handle tab switching\r\n  // get all tab links\r\n  const tabs = document.querySelectorAll(\".tabs a\");\r\n  // get sign-in/-up form elements\r\n  const signinForm = document.querySelector(\"#signin-tab\");\r\n  const signupForm = document.querySelector(\"#signup-tab\");\r\n\r\n  // add event listeners to the tabs\r\n  tabs.forEach((tab) => {\r\n    tab.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n\r\n      // remove 'active-tab' class from all tabs\r\n      tabs.forEach((currentTab) => currentTab.classList.remove(\"active-tab\"));\r\n      e.currentTarget.classList.add(\"active-tab\");\r\n      // add 'active-tab' class to current tab\r\n      const activeTab = e.currentTarget.getAttribute(\"href\");\r\n\r\n      // show/hide appropriate forms\r\n      if (activeTab === \"#signin-tab\") {\r\n        signinForm.style.display = \"block\";\r\n        signupForm.style.display = \"none\";\r\n      } else {\r\n        signinForm.style.display = \"none\";\r\n        signupForm.style.display = \"block\";\r\n      }\r\n    });\r\n  });\r\n\r\n  // handle signup submition\r\n  signupForm.addEventListener(\"submit\", async (e) => {\r\n    e.preventDefault();\r\n\r\n    // disable input while handling submission\r\n    const signupFieldset = signupForm.querySelector(\"fieldset\");\r\n    signupFieldset.setAttribute(\"disabled\", true);\r\n\r\n    // render status message\r\n    const signupStatus = signupForm.querySelector(\"#signup-status\");\r\n    signupStatus.innerHTML = `\r\n      <div class=\"modal-status modal-status-info\">\r\n        Please wait! We are creating your account.\r\n      </div>\r\n    `;\r\n\r\n    // get data from the frontend\r\n    const formData = {\r\n      username: signupForm.querySelector(\"#su-name\").value,\r\n      email: signupForm.querySelector(\"#su-email\").value,\r\n      password: signupForm.querySelector(\"#su-password\").value,\r\n    };\r\n\r\n    // send request to RestAPI\r\n    const response = await fetch(fblgstp_auth_rest.signup, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(formData),\r\n    });\r\n    const responseJSON = await response.json();\r\n\r\n    // check if sign-up was successful\r\n    if (responseJSON.status === 2) {\r\n      signupStatus.innerHTML = `\r\n        <div class=\"modal-status modal-status-success\">\r\n          Success! Your account has been created.\r\n        </div>\r\n      `;\r\n      location.reload();\r\n    } else {\r\n      signupFieldset.removeAttribute(\"disabled\");\r\n      signupStatus.innerHTML = `\r\n        <div class=\"modal-status modal-status-danger\">\r\n          Unable to create account! Please try again.\r\n        </div>\r\n      `;\r\n    }\r\n  });\r\n\r\n  // handle sign-in form submission\r\n  signinForm.addEventListener(\"submit\", async (event) => {\r\n    // cancel default action if possible\r\n    event.preventDefault();\r\n\r\n    // disable input while handling submission\r\n    const signinFieldset = signinForm.querySelector(\"fieldset\");\r\n    signinFieldset.setAttribute(\"disabled\", true);\r\n\r\n    // render status message\r\n    const signinStatus = signinForm.querySelector(\"#signin-status\");\r\n    signinStatus.innerHTML = `\r\n      <div class=\"modal-status modal-status-info\">\r\n        Please wait! Attempting login.\r\n      </div>\r\n    `;\r\n\r\n    // get data from frontend\r\n    const formData = {\r\n      user_login: signinForm.querySelector(\"#si-email\").value,\r\n      password: signinForm.querySelector(\"#si-password\").value,\r\n    };\r\n\r\n    // send request to Rest API\r\n    const response = await fetch(fblgstp_auth_rest.signin, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(formData),\r\n    });\r\n\r\n    // check if sign-in was successful\r\n    const responseJSON = await response.json();\r\n    if (responseJSON.status === 2) {\r\n      signinStatus.innerHTML = `\r\n        <div class=\"modal-status modal-status-success\">\r\n          Success! Your are logged in.\r\n        </div>\r\n      `;\r\n      location.reload();\r\n    } else {\r\n      signinFieldset.removeAttribute(\"disabled\");\r\n      signinStatus.innerHTML = `\r\n        <div class=\"modal-status modal-status-danger\">\r\n          Unable to login! Please try again.\r\n        </div>\r\n      `;\r\n    }\r\n  });\r\n});\r\n"],"names":["document","addEventListener","modalEl","querySelector","openModalBtn","querySelectorAll","forEach","el","e","preventDefault","classList","add","tabs","signinForm","signupForm","tab","currentTab","remove","currentTarget","activeTab","getAttribute","style","display","signupFieldset","setAttribute","signupStatus","innerHTML","formData","username","value","email","password","response","fetch","fblgstp_auth_rest","signup","method","headers","body","JSON","stringify","responseJSON","json","status","location","reload","removeAttribute","event","signinFieldset","signinStatus","user_login","signin"],"sourceRoot":""}